<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Mapbox Exercise</title>

        <script src='https://api.mapbox.com/mapbox-gl-js/v1.10.0/mapbox-gl.js'></script>
        <link href='https://api.mapbox.com/mapbox-gl-js/v1.10.0/mapbox-gl.css' rel='stylesheet' />
        <style>
            body {
                background-color: #3b3f41;
                height: 100vh;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
            }

            #map {
                height: 600px;
                width: 700px;
                border: 5px solid black;
            }

        </style>

    </head>
    <body>

        <div id='map'></div>

        <script src="js/keys.js"></script>
        <script src="js/mapbox-geocoder-utils.js"></script>

        <script>
            'use strict';



            mapboxgl.accessToken = mapboxKey;
            var map = new mapboxgl.Map({
                container: 'map',
                style: 'mapbox://styles/mapbox/streets-v9',
                zoom: 9.5
            });

            geocode("San Antonio, Texas", mapboxKey).then(function(result) {
                map
                    .setCenter(result);
            });

            //used to get lat long of restaurants
                // geocode("", mapboxKey).then(function(result) {
                //     console.log(result)
                // });

            var restaurantInfo = [
                {
                    name: 'Taco Blvd',
                    favDish: 'Asada Taco',
                    description: '<strong>Taco Blvd</strong><p><a href="https://www.yelp.com/biz/taco-blvd-san-antonio" target="_blank">Taco Blvd</a> is a great place to grab a delicious taco.</p>',
                },
                {
                    name: 'What-a-burger',
                    favDish: 'Bacon Cheeseburger',
                    description: '<strong>What-a-burger</strong><p><a href="https://whataburger.com/home" target="_blank">What-a-burger</a> is ol faithful.</p>',
                },
                {
                    name: 'Hot Joy',
                    favDish: 'Twice Fried Chicken Wings',
                    description: '<strong>Hot Joy</strong><p><a href="http://www.hotjoysa.com/" target="_blank">Hot Joy</a> is located downtown. Great food and beer.</p>',
                },
            ];

            restaurantInfo.forEach(function (restaurant, index, array) {

        // popup and marker one
            var popupOne = new mapboxgl.Popup()
                .setHTML(restaurantInfo[0].description);

            var markerOne = new mapboxgl.Marker()
                .setLngLat([-98.506801, 29.611168])
                .addTo(map)
                .setPopup(popupOne);

        // popup and marker two
            var popupTwo = new mapboxgl.Popup()
                .setHTML(restaurantInfo[1].description);

            var markerTwo = new mapboxgl.Marker()
                .setLngLat([-98.592424, 29.563791])
                .addTo(map)
                .setPopup(popupTwo);

        // popup and marker three
            var popupThree = new mapboxgl.Popup()
                .setHTML(restaurantInfo[2].description);

            var markerThree = new mapboxgl.Marker()
                .setLngLat([-98.490886, 29.413627])
                .addTo(map)
                .setPopup(popupThree);
            });

        </script>

    </body>
</html>